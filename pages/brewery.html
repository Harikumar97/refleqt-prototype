<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refleqt The Brewery - TaskFlow Dashboard</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            color: #2d3748;
        }

        /* Main Content */
        .main-content {
            padding: 30px;
            width: 100%;
        }

        .brewery-header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 40%, #f39800 100%);
            color: white;
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .brewery-header::before {
            content: '';
            position: absolute;
            top: -30%;
            right: -10%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M20,30 Q30,10 40,30 T60,30 T80,30" stroke="rgba(255,255,255,0.1)" stroke-width="2" fill="none"/><circle cx="15" cy="60" r="3" fill="rgba(255,255,255,0.08)"/><circle cx="85" cy="20" r="2" fill="rgba(255,255,255,0.06)"/><circle cx="50" cy="80" r="4" fill="rgba(255,255,255,0.1)"/></svg>');
            animation: breweryFloat 40s infinite linear;
        }

        @keyframes breweryFloat {
            0% { transform: translateX(-100px) rotate(0deg); }
            50% { transform: translateX(50px) rotate(180deg); }
            100% { transform: translateX(-100px) rotate(360deg); }
        }

        .brewery-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }

        .brewery-subtitle {
            font-size: 16px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .brewery-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        /* Brew Dashboard */
        .brew-dashboard {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .brewing-status {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .status-title {
            font-size: 20px;
            font-weight: bold;
            color: #2d3748;
        }

        .brew-queue {
            display: grid;
            gap: 16px;
        }

        .brew-item {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .brew-item.brewing {
            border-color: #f39800;
            background: linear-gradient(135deg, #fffbf0 0%, #ffffff 100%);
        }

        .brew-item.ready {
            border-color: #48bb78;
            background: linear-gradient(135deg, #f0fff4 0%, #ffffff 100%);
        }

        .brew-item.scheduled {
            border-color: #4299e1;
            background: linear-gradient(135deg, #ebf8ff 0%, #ffffff 100%);
        }

        .brew-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(243, 152, 0, 0.15);
        }

        .brew-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .brew-title {
            font-size: 18px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 4px;
        }

        .brew-type {
            font-size: 14px;
            color: #718096;
            font-style: italic;
        }

        .brew-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-brewing {
            background: #fed7aa;
            color: #c2410c;
        }

        .status-ready {
            background: #bbf7d0;
            color: #15803d;
        }

        .status-scheduled {
            background: #bfdbfe;
            color: #1d4ed8;
        }

        .brew-description {
            color: #4a5568;
            line-height: 1.5;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .brew-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .metric-item {
            text-align: center;
            background: #f7fafc;
            border-radius: 6px;
            padding: 8px;
        }

        .metric-value {
            font-size: 16px;
            font-weight: bold;
            color: #2d3748;
        }

        .metric-label {
            font-size: 11px;
            color: #718096;
            text-transform: uppercase;
        }

        .brew-progress {
            margin-bottom: 16px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f39800, #f59e0b);
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 12px;
            color: #718096;
            display: flex;
            justify-content: space-between;
        }

        .brew-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .action-btn-brew {
            padding: 6px 12px;
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn-brew:hover {
            background: #f39800;
            color: white;
            border-color: #f39800;
        }

        .action-btn-brew.primary {
            background: linear-gradient(135deg, #f39800 0%, #f59e0b 100%);
            color: white;
            border-color: transparent;
        }

        /* Brew Library */
        .brew-library {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .library-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .library-filter {
            display: flex;
            gap: 8px;
        }

        .filter-tab {
            padding: 6px 12px;
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-tab.active {
            background: linear-gradient(135deg, #f39800 0%, #f59e0b 100%);
            color: white;
            border-color: transparent;
        }

        .library-grid {
            display: grid;
            gap: 16px;
        }

        .library-item {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .library-item:hover {
            border-color: #f39800;
            box-shadow: 0 4px 12px rgba(243, 152, 0, 0.1);
        }

        .library-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .library-item-title {
            font-weight: 600;
            color: #2d3748;
        }

        .library-item-date {
            font-size: 12px;
            color: #718096;
        }

        .library-item-summary {
            font-size: 14px;
            color: #4a5568;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .library-item-stats {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: #718096;
        }

        /* Brewery Control Panel */
        .brewery-control-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .brew-creator {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .creator-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #2d3748;
        }

        .brew-templates {
            display: grid;
            gap: 8px;
        }

        .template-item {
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .template-item:hover {
            border-color: #f39800;
            background: #fffbf0;
        }

        .brewery-analytics {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .analytics-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .analytics-stat {
            text-align: center;
            background: #f7fafc;
            border-radius: 8px;
            padding: 12px;
        }

        .analytics-stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #2d3748;
        }

        .analytics-stat-label {
            font-size: 12px;
            color: #718096;
            text-transform: uppercase;
        }

        .trending-topics {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .trending-item {
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .trending-item:last-child {
            border-bottom: none;
        }

        .trending-topic {
            font-size: 14px;
            color: #2d3748;
        }

        .trending-score {
            font-size: 12px;
            color: #f39800;
            font-weight: 600;
        }

        .delivery-schedule {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .schedule-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .schedule-item:last-child {
            border-bottom: none;
        }

        .schedule-time {
            font-size: 12px;
            color: #f39800;
            font-weight: 600;
            min-width: 60px;
        }

        .schedule-title {
            font-size: 14px;
            color: #2d3748;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 4000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 1000px;
            width: 95%;
            max-height: 95vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .modal-overlay.show .modal-content {
            transform: scale(1);
        }

        .brew-preview {
            display: grid;
            gap: 24px;
        }

        .preview-header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #f39800 0%, #f59e0b 100%);
            color: white;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .preview-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .preview-subtitle {
            opacity: 0.9;
            font-size: 16px;
        }

        .brew-section {
            background: #f7fafc;
            border-radius: 12px;
            padding: 24px;
        }

        .brew-section h3 {
            color: #2d3748;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 20px;
        }

        .insight-card {
            background: white;
            border-left: 4px solid #f39800;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .insight-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .insight-content {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .insight-source {
            font-size: 12px;
            color: #718096;
            font-style: italic;
        }

        .competitive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }

        .competitor-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
        }

        .competitor-name {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .competitor-highlights {
            font-size: 14px;
            color: #4a5568;
            line-height: 1.5;
        }

        .recommendation-item {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            border-left: 4px solid #48bb78;
        }

        .recommendation-priority {
            display: inline-block;
            background: #fed7aa;
            color: #c2410c;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .recommendation-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .recommendation-description {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .recommendation-impact {
            font-size: 12px;
            color: #48bb78;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .brewery-layout {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .competitive-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Brewing Animation */
        .brewing-animation {
            position: relative;
            display: inline-block;
        }

        .brewing-animation::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #f39800, #f59e0b, #f39800);
            border-radius: inherit;
            z-index: -1;
            animation: brewingGlow 2s infinite;
        }

        @keyframes brewingGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        .pulse-brew {
            animation: pulseBrew 2s infinite;
        }

        @keyframes pulseBrew {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.02); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Main App Component
        function App() {
            const [activeBrews, setActiveBrews] = useState([]);
            const [brewLibrary, setBrewLibrary] = useState([]);
            const [libraryFilter, setLibraryFilter] = useState('all');
            const [showModal, setShowModal] = useState(false);
            const [modalContent, setModalContent] = useState(null);
            const [obsessionScore, setObsessionScore] = useState(8.9);

            // Initialize with some sample data
            useEffect(() => {
                const initialBrews = [
                    {
                        id: 1,
                        title: 'SaaS Conversion Crisis Analysis',
                        type: 'Market Intelligence',
                        status: 'ready',
                        progress: 100,
                        description: 'Deep analysis of why TaskFlow\'s conversion lags behind competitors. Includes actionable recommendations for the 3% to 8% journey.',
                        insights: 47,
                        sources: 23,
                        pages: 12,
                        readTime: '8 min',
                        completedAt: '2024-12-10T10:30:00Z'
                    },
                    {
                        id: 2,
                        title: 'Project Management Tools Competitive Landscape Q4 2024',
                        type: 'Competitive Intelligence',
                        status: 'brewing',
                        progress: 67,
                        description: 'Comprehensive analysis of Asana, Monday.com, Notion, and emerging players. Focus on pricing, features, and market positioning.',
                        insights: 34,
                        sources: 18,
                        pages: 15,
                        readTime: '12 min',
                        estimatedCompletion: '45 minutes'
                    },
                    {
                        id: 3,
                        title: 'SMB SaaS Onboarding Best Practices 2024',
                        type: 'Industry Report',
                        status: 'scheduled',
                        progress: 0,
                        description: 'Analysis of successful onboarding flows from 50+ SaaS companies targeting small-medium businesses.',
                        insights: 0,
                        sources: 0,
                        pages: 0,
                        scheduledFor: 'Tomorrow 9:00 AM'
                    }
                ];

                const initialLibrary = [
                    {
                        id: 'lib_1',
                        title: 'TaskFlow vs Competitors: Feature Gap Analysis',
                        date: '2024-12-08',
                        type: 'competitive',
                        summary: 'Detailed comparison revealing TaskFlow\'s strengths in customization but gaps in AI-powered features and enterprise security.',
                        downloads: 12,
                        insights: 23,
                        rating: 4.8
                    },
                    {
                        id: 'lib_2',
                        title: 'SaaS Conversion Funnel Optimization Playbook',
                        date: '2024-12-05',
                        type: 'strategy',
                        summary: 'Step-by-step guide to improving trial-to-paid conversion, with specific tactics for project management tools.',
                        downloads: 34,
                        insights: 31,
                        rating: 4.9
                    },
                    {
                        id: 'lib_3',
                        title: 'User Onboarding Psychology: What Makes Users Stay',
                        date: '2024-12-02',
                        type: 'market',
                        summary: 'Behavioral analysis of successful vs failed onboarding experiences across 100+ SaaS products.',
                        downloads: 28,
                        insights: 19,
                        rating: 4.7
                    }
                ];

                setActiveBrews(initialBrews);
                setBrewLibrary(initialLibrary);
            }, []);

            // Simulate brewing progress
            useEffect(() => {
                const interval = setInterval(() => {
                    setActiveBrews(prev => prev.map(brew => {
                        if (brew.status === 'brewing' && brew.progress < 100) {
                            const newProgress = Math.min(100, brew.progress + Math.random() * 10);
                            if (newProgress === 100) {
                                return { ...brew, progress: 100, status: 'ready', completedAt: new Date().toISOString() };
                            }
                            return { ...brew, progress: newProgress };
                        }
                        return brew;
                    }));
                }, 3000);

                return () => clearInterval(interval);
            }, []);

            const viewBrewDetails = (brew) => {
                setModalContent({
                    title: brew.title,
                    brew: brew
                });
                setShowModal(true);
            };

            const launchNewBrew = (template) => {
                const newBrew = {
                    id: Date.now(),
                    title: template,
                    type: 'Custom Analysis',
                    status: 'brewing',
                    progress: 0,
                    description: 'Custom intelligence brew based on your specific requirements.',
                    insights: 0,
                    sources: 0,
                    pages: 0,
                    estimatedCompletion: '30 minutes'
                };

                setActiveBrews(prev => [newBrew, ...prev]);
                setObsessionScore(prev => Math.min(10, prev + 0.1));
            };

            const filteredLibrary = brewLibrary.filter(item => {
                if (libraryFilter === 'all') return true;
                return item.type === libraryFilter;
            });

            return (
                <div className="main-content">
                    <div className="brewery-header">
                        <h1 className="brewery-title">🍺 The Brewery</h1>
                        <p className="brewery-subtitle">
                            AI-powered intelligence reports and market analysis - your personalized business intelligence distillery
                        </p>
                    </div>

                    <div className="brewery-layout">
                        <div className="brew-dashboard">
                            <BrewingStatus 
                                activeBrews={activeBrews}
                                onViewDetails={viewBrewDetails}
                            />

                            <BrewLibrary
                                brewLibrary={filteredLibrary}
                                libraryFilter={libraryFilter}
                                setLibraryFilter={setLibraryFilter}
                                onViewDetails={viewBrewDetails}
                            />
                        </div>

                        <BreweryControlPanel 
                            onLaunchBrew={launchNewBrew}
                            activeBrews={activeBrews}
                        />
                    </div>

                    <BrewDetailsModal
                        show={showModal}
                        onClose={() => setShowModal(false)}
                        content={modalContent}
                    />
                </div>
            );
        }

        // Brewing Status Component
        function BrewingStatus({ activeBrews, onViewDetails }) {
            return (
                <div className="brewing-status">
                    <div className="status-header">
                        <h2 className="status-title">⚡ Active Brews</h2>
                        <span style={{color: '#718096', fontSize: '14px'}}>
                            {activeBrews.length} intelligence reports in progress
                        </span>
                    </div>

                    <div className="brew-queue">
                        {activeBrews.map(brew => (
                            <BrewItem 
                                key={brew.id} 
                                brew={brew} 
                                onViewDetails={() => onViewDetails(brew)}
                            />
                        ))}
                    </div>

                    {activeBrews.length === 0 && (
                        <div style={{textAlign: 'center', padding: '40px', color: '#718096'}}>
                            <div style={{fontSize: '48px', marginBottom: '16px'}}>🍺</div>
                            <p>No active brews. Launch your first intelligence report!</p>
                        </div>
                    )}
                </div>
            );
        }

        // Brew Item Component
        function BrewItem({ brew, onViewDetails }) {
            const getStatusClass = (status) => {
                switch(status) {
                    case 'brewing': return 'status-brewing';
                    case 'ready': return 'status-ready';
                    case 'scheduled': return 'status-scheduled';
                    default: return 'status-brewing';
                }
            };

            const getItemClass = (status) => {
                return `brew-item ${status} ${status === 'brewing' ? 'pulse-brew' : ''}`;
            };

            const formatEstimatedTime = () => {
                if (brew.status === 'ready') return 'Completed';
                if (brew.status === 'scheduled') return brew.scheduledFor;
                return brew.estimatedCompletion || 'Processing...';
            };

            return (
                <div className={getItemClass(brew.status)} onClick={onViewDetails}>
                    <div className="brew-header">
                        <div>
                            <div className="brew-title">{brew.title}</div>
                            <div className="brew-type">{brew.type}</div>
                        </div>
                        <div className={`brew-status ${getStatusClass(brew.status)}`}>
                            {brew.status}
                        </div>
                    </div>

                    <div className="brew-description">{brew.description}</div>

                    <div className="brew-metrics">
                        <div className="metric-item">
                            <div className="metric-value">{brew.insights}</div>
                            <div className="metric-label">Insights</div>
                        </div>
                        <div className="metric-item">
                            <div className="metric-value">{brew.sources}</div>
                            <div className="metric-label">Sources</div>
                        </div>
                        <div className="metric-item">
                            <div className="metric-value">{brew.pages || brew.readTime}</div>
                            <div className="metric-label">{brew.pages ? 'Pages' : 'Read Time'}</div>
                        </div>
                    </div>

                    {brew.status === 'brewing' && (
                        <div className="brew-progress">
                            <div className="progress-bar">
                                <div 
                                    className="progress-fill"
                                    style={{width: `${brew.progress}%`}}
                                ></div>
                            </div>
                            <div className="progress-text">
                                <span>{Math.round(brew.progress)}% Complete</span>
                                <span>{formatEstimatedTime()}</span>
                            </div>
                        </div>
                    )}

                    <div className="brew-actions">
                        {brew.status === 'ready' && (
                            <button className="action-btn-brew primary">
                                📖 Read Report
                            </button>
                        )}
                        {brew.status === 'brewing' && (
                            <button className="action-btn-brew">
                                ⏸️ Pause Brewing
                            </button>
                        )}
                        <button className="action-btn-brew">
                            📧 Share
                        </button>
                        <button className="action-btn-brew">
                            📊 Analytics
                        </button>
                    </div>
                </div>
            );
        }

        // Brew Library Component
        function BrewLibrary({ brewLibrary, libraryFilter, setLibraryFilter, onViewDetails }) {
            const filterOptions = [
                { id: 'all', name: 'All Reports' },
                { id: 'competitive', name: 'Competitive' },
                { id: 'market', name: 'Market' },
                { id: 'strategy', name: 'Strategy' }
            ];

            return (
                <div className="brew-library">
                    <div className="library-header">
                        <h2 style={{fontSize: '20px', fontWeight: 'bold', color: '#2d3748'}}>
                            📚 Brew Library
                        </h2>
                        <div className="library-filter">
                            {filterOptions.map(option => (
                                <button
                                    key={option.id}
                                    className={`filter-tab ${libraryFilter === option.id ? 'active' : ''}`}
                                    onClick={() => setLibraryFilter(option.id)}
                                >
                                    {option.name}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="library-grid">
                        {brewLibrary.map(item => (
                            <LibraryItem 
                                key={item.id} 
                                item={item} 
                                onViewDetails={() => onViewDetails({...item, status: 'ready'})}
                            />
                        ))}
                    </div>

                    {brewLibrary.length === 0 && (
                        <div style={{textAlign: 'center', padding: '40px', color: '#718096'}}>
                            <div style={{fontSize: '48px', marginBottom: '16px'}}>📚</div>
                            <p>No reports in this category yet.</p>
                        </div>
                    )}
                </div>
            );
        }

        // Library Item Component
        function LibraryItem({ item, onViewDetails }) {
            return (
                <div className="library-item" onClick={onViewDetails}>
                    <div className="library-item-header">
                        <div className="library-item-title">{item.title}</div>
                        <div className="library-item-date">{new Date(item.date).toLocaleDateString()}</div>
                    </div>
                    
                    <div className="library-item-summary">{item.summary}</div>
                    
                    <div className="library-item-stats">
                        <span>📥 {item.downloads} downloads</span>
                        <span>💡 {item.insights} insights</span>
                        <span>⭐ {item.rating}/5</span>
                    </div>
                </div>
            );
        }

        // Brewery Control Panel Component
        function BreweryControlPanel({ onLaunchBrew, activeBrews }) {
            const brewTemplates = [
                'Competitive Pricing Analysis',
                'User Onboarding Optimization',
                'Feature Gap Assessment',
                'Customer Churn Investigation',
                'Market Entry Strategy',
                'Product-Market Fit Analysis'
            ];

            const trendingTopics = [
                { topic: 'AI-powered project management', score: '🔥 Hot' },
                { topic: 'Remote team collaboration', score: '📈 Rising' },
                { topic: 'SaaS conversion optimization', score: '🔥 Hot' },
                { topic: 'Enterprise security features', score: '📈 Rising' },
                { topic: 'API-first architecture', score: '💡 Watch' }
            ];

            const upcomingDeliveries = [
                { time: '2:00 PM', title: 'Competitive Landscape Update' },
                { time: '4:30 PM', title: 'Weekly Market Intelligence' },
                { time: 'Tomorrow', title: 'Monthly Industry Report' }
            ];

            const totalBrews = activeBrews.length;
            const completedBrews = activeBrews.filter(b => b.status === 'ready').length;
            const avgInsights = totalBrews > 0 ? Math.round(activeBrews.reduce((sum, b) => sum + b.insights, 0) / totalBrews) : 0;

            return (
                <div className="brewery-control-panel">
                    <div className="brew-creator">
                        <h3 className="creator-title">🚀 Launch New Brew</h3>
                        <div className="brew-templates">
                            {brewTemplates.map((template, index) => (
                                <div
                                    key={index}
                                    className="template-item"
                                    onClick={() => onLaunchBrew(template)}
                                >
                                    {template}
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="brewery-analytics">
                        <h3 className="creator-title">📊 Brewery Analytics</h3>
                        <div className="analytics-stats">
                            <div className="analytics-stat">
                                <div className="analytics-stat-value">{totalBrews}</div>
                                <div className="analytics-stat-label">Total Brews</div>
                            </div>
                            <div className="analytics-stat">
                                <div className="analytics-stat-value">{completedBrews}</div>
                                <div className="analytics-stat-label">Ready</div>
                            </div>
                            <div className="analytics-stat">
                                <div className="analytics-stat-value">{avgInsights}</div>
                                <div className="analytics-stat-label">Avg Insights</div>
                            </div>
                            <div className="analytics-stat">
                                <div className="analytics-stat-value">4.8</div>
                                <div className="analytics-stat-label">Quality Score</div>
                            </div>
                        </div>
                    </div>

                    <div className="trending-topics">
                        <h3 className="creator-title">🔥 Trending Topics</h3>
                        {trendingTopics.map((item, index) => (
                            <div key={index} className="trending-item">
                                <div className="trending-topic">{item.topic}</div>
                                <div className="trending-score">{item.score}</div>
                            </div>
                        ))}
                    </div>

                    <div className="delivery-schedule">
                        <h3 className="creator-title">📅 Delivery Schedule</h3>
                        {upcomingDeliveries.map((item, index) => (
                            <div key={index} className="schedule-item">
                                <div className="schedule-time">{item.time}</div>
                                <div className="schedule-title">{item.title}</div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Brew Details Modal Component
        function BrewDetailsModal({ show, onClose, content }) {
            if (!content) return null;

            const { brew } = content;

            const keyInsights = [
                {
                    title: 'Conversion Rate Gap Analysis',
                    content: 'TaskFlow\'s 3.2% conversion rate significantly lags behind industry leaders. Asana (8.1%) and Monday.com (7.4%) excel through simplified onboarding and progressive feature disclosure.',
                    source: 'Competitive Analysis Engine'
                },
                {
                    title: 'Onboarding Friction Points',
                    content: 'User session recordings reveal 67% of trial users abandon signup at the plan selection step. Cognitive load analysis shows 12 decision points in first 5 minutes - 3x industry average.',
                    source: 'User Behavior Analytics'
                },
                {
                    title: 'Enterprise Opportunity',
                    content: 'Power users who customize 5+ fields convert at 67% rate vs 3% average. This segment represents untapped enterprise potential worth $2.3M ARR.',
                    source: 'Revenue Intelligence'
                }
            ];

            const competitorAnalysis = [
                {
                    name: 'Asana',
                    highlights: '• AI Project Insights launched Q4 2024\n• 8.1% trial conversion rate\n• Enterprise security focus\n• $4.99-$24.99 pricing range'
                },
                {
                    name: 'Monday.com',
                    highlights: '• Visual workflow emphasis\n• 7.4% trial conversion rate\n• Strong SMB market penetration\n• $8-$16 per user pricing'
                },
                {
                    name: 'Notion',
                    highlights: '• All-in-one workspace positioning\n• 12.3% conversion (highest)\n• Strong developer community\n• $4-$8 per user pricing'
                }
            ];

            const actionableRecommendations = [
                {
                    priority: 'Critical',
                    title: 'Implement Progressive Onboarding',
                    description: 'Redesign signup flow with maximum 3 steps per screen. Add "Skip for now" options on non-essential setup. Implement context-sensitive help tooltips.',
                    impact: 'Projected 15-20% conversion improvement'
                },
                {
                    priority: 'High',
                    title: 'Launch Enterprise Track',
                    description: 'Create dedicated onboarding flow for power users. Fast-track advanced features and customization options. Target the 67% conversion segment.',
                    impact: 'Potential $2.3M ARR unlock'
                },
                {
                    priority: 'Medium',
                    title: 'Competitive Feature Parity',
                    description: 'Develop AI-powered project insights to match Asana. Focus on automated project health scoring and predictive analytics.',
                    impact: 'Market positioning improvement'
                }
            ];

            return (
                <div className={`modal-overlay ${show ? 'show' : ''}`} onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px'}}>
                            <h2 style={{fontSize: '24px', fontWeight: 'bold', color: '#2d3748'}}>
                                🍺 {content.title}
                            </h2>
                            <button 
                                onClick={onClose}
                                style={{background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer', color: '#a0aec0'}}
                            >
                                ×
                            </button>
                        </div>

                        <div className="brew-preview">
                            <div className="preview-header">
                                <div className="preview-title">{brew.title}</div>
                                <div className="preview-subtitle">
                                    Generated on {new Date().toLocaleDateString()} • {brew.readTime || '8 min'} read time
                                </div>
                            </div>

                            <div className="brew-section">
                                <h3>📋 Executive Summary</h3>
                                <div style={{background: 'white', borderRadius: '8px', padding: '16px', color: '#4a5568', lineHeight: '1.6'}}>
                                    TaskFlow's conversion challenge stems from onboarding complexity and lack of progressive feature disclosure. 
                                    Competitors achieve 2.5x higher conversion through simplified user journeys and targeted feature presentation. 
                                    Key opportunity lies in enterprise segment where power users convert at 67% rate. 
                                    Implementing recommended changes could improve overall conversion from 3.2% to 5.8% within 8 weeks.
                                </div>
                            </div>

                            <div className="brew-section">
                                <h3>💡 Key Insights</h3>
                                {keyInsights.map((insight, index) => (
                                    <div key={index} className="insight-card">
                                        <div className="insight-title">{insight.title}</div>
                                        <div className="insight-content">{insight.content}</div>
                                        <div className="insight-source">Source: {insight.source}</div>
                                    </div>
                                ))}
                            </div>

                            <div className="brew-section">
                                <h3>⚔️ Competitive Landscape</h3>
                                <div className="competitive-grid">
                                    {competitorAnalysis.map((competitor, index) => (
                                        <div key={index} className="competitor-card">
                                            <div className="competitor-name">{competitor.name}</div>
                                            <div className="competitor-highlights">
                                                {competitor.highlights.split('\n').map((line, i) => (
                                                    <div key={i}>{line}</div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="brew-section">
                                <h3>🎯 Actionable Recommendations</h3>
                                {actionableRecommendations.map((rec, index) => (
                                    <div key={index} className="recommendation-item">
                                        <div className="recommendation-priority">{rec.priority}</div>
                                        <div className="recommendation-title">{rec.title}</div>
                                        <div className="recommendation-description">{rec.description}</div>
                                        <div className="recommendation-impact">Impact: {rec.impact}</div>
                                    </div>
                                ))}
                            </div>

                            <div className="brew-section">
                                <h3>📊 Data Sources & Methodology</h3>
                                <div style={{background: 'white', borderRadius: '8px', padding: '16px'}}>
                                    <div style={{display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '16px', marginBottom: '16px'}}>
                                        <div style={{textAlign: 'center'}}>
                                            <div style={{fontSize: '20px', fontWeight: 'bold', color: '#f39800'}}>{brew.sources || 23}</div>
                                            <div style={{fontSize: '12px', color: '#718096'}}>Data Sources</div>
                                        </div>
                                        <div style={{textAlign: 'center'}}>
                                            <div style={{fontSize: '20px', fontWeight: 'bold', color: '#f39800'}}>{brew.insights || 47}</div>
                                            <div style={{fontSize: '12px', color: '#718096'}}>Insights Generated</div>
                                        </div>
                                        <div style={{textAlign: 'center'}}>
                                            <div style={{fontSize: '20px', fontWeight: 'bold', color: '#f39800'}}>95%</div>
                                            <div style={{fontSize: '12px', color: '#718096'}}>Confidence Score</div>
                                        </div>
                                    </div>
                                    <div style={{fontSize: '14px', color: '#4a5568', lineHeight: '1.6'}}>
                                        <strong>Sources:</strong> User analytics (Mixpanel, Amplitude), competitor analysis (SimilarWeb, Ahrefs), 
                                        customer interviews (n=47), industry reports (Gartner, Forrester), social listening (Brandwatch), 
                                        and pricing intelligence (PriceIntelligently).
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style={{marginTop: '24px', display: 'flex', justifyContent: 'flex-end', gap: '12px'}}>
                            <button 
                                onClick={onClose}
                                style={{
                                    padding: '10px 20px',
                                    background: '#f7fafc',
                                    border: '1px solid #e2e8f0',
                                    borderRadius: '8px',
                                    cursor: 'pointer'
                                }}
                            >
                                Close
                            </button>
                            <button 
                                style={{
                                    padding: '10px 20px',
                                    background: 'linear-gradient(135deg, #f39800 0%, #f59e0b 100%)',
                                    color: 'white',
                                    border: 'none',
                                    borderRadius: '8px',
                                    cursor: 'pointer'
                                }}
                            >
                                📧 Share Report
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
