<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refleqt Strategy Cohorts - TaskFlow Dashboard</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f8f9fa;
            color: #2d3748;
        }

        /* Main Content */
        .main-content {
            padding: 30px;
            width: 100%;
        }

        .cohorts-header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .cohorts-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 100%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><polygon points="50,15 65,35 85,35 70,50 75,70 50,60 25,70 30,50 15,35 35,35" fill="rgba(255,255,255,0.1)"/></svg>');
            animation: strategicFloat 25s infinite linear;
        }

        @keyframes strategicFloat {
            0% { transform: translateX(100px) translateY(0) rotate(0deg); }
            50% { transform: translateX(-50px) translateY(-50px) rotate(180deg); }
            100% { transform: translateX(100px) translateY(0) rotate(360deg); }
        }

        .cohorts-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }

        .cohorts-subtitle {
            font-size: 16px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .cohorts-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        /* Scenario Builder */
        .scenario-builder {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .builder-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .builder-title {
            font-size: 20px;
            font-weight: bold;
            color: #2d3748;
        }

        .scenario-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f7fafc;
            padding-bottom: 16px;
        }

        .scenario-tab {
            padding: 10px 16px;
            background: transparent;
            border: 2px solid #e2e8f0;
            border-radius: 20px;
            color: #718096;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 14px;
        }

        .scenario-tab.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-color: transparent;
            transform: scale(1.05);
        }

        .scenario-tab:hover:not(.active) {
            border-color: #f093fb;
            color: #2d3748;
        }

        .scenario-input-section {
            margin-bottom: 20px;
        }

        .input-label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            display: block;
        }

        .scenario-textarea {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            margin-bottom: 16px;
            transition: all 0.3s;
            resize: vertical;
            min-height: 100px;
        }

        .scenario-textarea:focus {
            outline: none;
            border-color: #f093fb;
            box-shadow: 0 0 0 3px rgba(240, 147, 251, 0.1);
        }

        .scenario-variables {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .variable-input {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .variable-input input,
        .variable-input select {
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .variable-input input:focus,
        .variable-input select:focus {
            outline: none;
            border-color: #f093fb;
        }

        .scenario-templates {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .template-chip {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .template-chip:hover {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
        }

        .run-cohort-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .run-cohort-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(240, 147, 251, 0.3);
        }

        .run-cohort-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Active Cohorts */
        .active-cohorts {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .cohorts-grid {
            display: grid;
            gap: 20px;
        }

        .cohort-card {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .cohort-card.running {
            border-color: #f093fb;
            background: linear-gradient(135deg, #fdf7ff 0%, #ffffff 100%);
        }

        .cohort-card.completed {
            border-color: #48bb78;
            background: linear-gradient(135deg, #f0fff4 0%, #ffffff 100%);
        }

        .cohort-header-card {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .cohort-title-card {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 4px;
        }

        .cohort-scenario {
            font-size: 14px;
            color: #718096;
            margin-bottom: 12px;
        }

        .cohort-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-running {
            background: #fbb6ce;
            color: #97266d;
        }

        .status-completed {
            background: #c6f6d5;
            color: #2f855a;
        }

        .scenarios-section {
            margin-bottom: 16px;
        }

        .scenarios-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 8px;
        }

        .scenario-outcome {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 12px;
            text-align: center;
            position: relative;
        }

        .scenario-outcome.best {
            border-color: #48bb78;
            background: #f0fff4;
        }

        .scenario-outcome.worst {
            border-color: #f56565;
            background: #fff5f5;
        }

        .scenario-outcome.likely {
            border-color: #ed8936;
            background: #fffaf0;
        }

        .outcome-label {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .outcome-value {
            font-size: 14px;
            font-weight: bold;
        }

        .cohort-progress {
            margin-bottom: 16px;
        }

        .progress-bar-cohort {
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill-cohort {
            height: 100%;
            background: linear-gradient(90deg, #f093fb, #f5576c);
            transition: width 0.5s ease;
        }

        .progress-text-cohort {
            font-size: 12px;
            color: #718096;
            display: flex;
            justify-content: space-between;
        }

        .recommendations-preview {
            background: #f7fafc;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .recommendations-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .recommendations-list {
            list-style: none;
            font-size: 13px;
            color: #4a5568;
        }

        .recommendations-list li {
            margin-bottom: 4px;
            padding-left: 12px;
            position: relative;
        }

        .recommendations-list li::before {
            content: '→';
            color: #f093fb;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .cohort-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .action-btn-cohort {
            padding: 6px 12px;
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn-cohort:hover {
            background: #f093fb;
            color: white;
        }

        /* Strategy Control Panel */
        .strategy-control-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .strategy-stats {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .strategy-stats-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #2d3748;
        }

        .strategy-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .strategy-stat-item {
            text-align: center;
            padding: 12px;
            background: #f7fafc;
            border-radius: 8px;
        }

        .strategy-stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #2d3748;
        }

        .strategy-stat-label {
            font-size: 12px;
            color: #718096;
            text-transform: uppercase;
        }

        .strategy-templates {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .strategy-template-item {
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .strategy-template-item:hover {
            border-color: #f093fb;
            background: rgba(240, 147, 251, 0.02);
        }

        .strategy-template-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .strategy-template-description {
            font-size: 12px;
            color: #718096;
        }

        .recent-strategies {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .strategy-insight-item {
            padding: 12px;
            border-left: 4px solid #f093fb;
            background: #fdf7ff;
            border-radius: 0 8px 8px 0;
            margin-bottom: 12px;
        }

        .strategy-insight-text {
            font-size: 14px;
            color: #2d3748;
            line-height: 1.5;
        }

        .strategy-insight-outcome {
            font-size: 12px;
            color: #718096;
            margin-top: 4px;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 4000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .modal-overlay.show .modal-content {
            transform: scale(1);
        }

        .scenario-analysis {
            display: grid;
            gap: 24px;
        }

        .analysis-section {
            background: #f7fafc;
            border-radius: 12px;
            padding: 20px;
        }

        .analysis-section h3 {
            color: #2d3748;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .scenarios-comparison {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .scenario-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }

        .scenario-card.best-case {
            border-color: #48bb78;
            background: linear-gradient(135deg, #f0fff4 0%, #ffffff 100%);
        }

        .scenario-card.worst-case {
            border-color: #f56565;
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
        }

        .scenario-card.likely-case {
            border-color: #ed8936;
            background: linear-gradient(135deg, #fffaf0 0%, #ffffff 100%);
        }

        .scenario-title {
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .scenario-metrics {
            display: grid;
            gap: 8px;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .metric-label {
            color: #718096;
        }

        .metric-value {
            font-weight: 600;
            color: #2d3748;
        }

        .risk-matrix {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .risk-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px;
        }

        .risk-level {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .risk-level.high { color: #e53e3e; }
        .risk-level.medium { color: #dd6b20; }
        .risk-level.low { color: #38a169; }

        .risk-description {
            font-size: 13px;
            color: #4a5568;
        }

        .strategic-recommendations {
            display: grid;
            gap: 12px;
        }

        .recommendation-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-left: 4px solid #f093fb;
            border-radius: 8px;
            padding: 16px;
        }

        .recommendation-priority {
            display: inline-block;
            background: #fbb6ce;
            color: #97266d;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .recommendation-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .recommendation-details {
            font-size: 14px;
            color: #4a5568;
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .recommendation-meta {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: #718096;
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }

        .loading-strategy {
            animation: pulse 2s infinite;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .cohorts-layout {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .scenario-variables {
                grid-template-columns: 1fr;
            }
            
            .scenarios-comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Main App Component
        function App() {
            const [activeCohorts, setActiveCohorts] = useState([]);
            const [selectedScenarioType, setSelectedScenarioType] = useState('conversion');
            const [scenarioDescription, setScenarioDescription] = useState('');
            const [scenarioVariables, setScenarioVariables] = useState({
                timeframe: '3months',
                budget: '10000',
                teamSize: '3',
                riskTolerance: 'medium'
            });
            const [showModal, setShowModal] = useState(false);
            const [modalContent, setModalContent] = useState(null);
            const [obsessionScore, setObsessionScore] = useState(8.5);

            const scenarioTypes = [
                { id: 'conversion', name: 'Conversion Optimization', emoji: '📈' },
                { id: 'competitive', name: 'Competitive Response', emoji: '⚔️' },
                { id: 'growth', name: 'Growth Strategy', emoji: '🚀' },
                { id: 'crisis', name: 'Crisis Management', emoji: '🛡️' }
            ];

            const scenarioTemplates = [
                "What if we reduce pricing by 30%?",
                "How would we respond to a major competitor launch?",
                "What if our top competitor copies our key features?",
                "How to optimize onboarding for 15% conversion boost?",
                "What if we pivot to enterprise-first strategy?",
                "How to handle negative PR or security incident?"
            ];

            const runCohort = (scenario) => {
                const cohortId = Date.now();
                const newCohort = {
                    id: cohortId,
                    scenario: scenario,
                    type: selectedScenarioType,
                    variables: { ...scenarioVariables },
                    status: 'running',
                    progress: 0,
                    scenarios: {
                        best: null,
                        worst: null,
                        likely: null
                    },
                    recommendations: [],
                    startTime: new Date(),
                    estimatedCompletion: new Date(Date.now() + 8 * 60000) // 8 minutes
                };

                setActiveCohorts(prev => [newCohort, ...prev]);
                setScenarioDescription('');
                setObsessionScore(prev => Math.min(10, prev + 0.4));

                // Simulate cohort analysis progression
                simulateCohortProgress(cohortId);
            };

            const simulateCohortProgress = (cohortId) => {
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 20 + 10;
                    
                    setActiveCohorts(prev => prev.map(cohort => {
                        if (cohort.id === cohortId) {
                            const updatedCohort = { ...cohort, progress: Math.min(100, progress) };
                            
                            // Generate scenarios as progress increases
                            if (progress > 30 && !updatedCohort.scenarios.best) {
                                updatedCohort.scenarios = generateScenarios(cohort.type, cohort.scenario);
                            }
                            
                            // Add recommendations when analysis is complete
                            if (progress > 80 && updatedCohort.recommendations.length === 0) {
                                updatedCohort.recommendations = generateRecommendations(cohort.type);
                                updatedCohort.status = 'completed';
                            }

                            return updatedCohort;
                        }
                        return cohort;
                    }));

                    if (progress >= 100) {
                        clearInterval(interval);
                    }
                }, 2000);
            };

            const generateScenarios = (type, scenario) => {
                const scenarioData = {
                    conversion: {
                        best: { 
                            label: 'Best Case', 
                            conversion: '8.2%', 
                            revenue: '+47%', 
                            timeline: '6 weeks'
                        },
                        worst: { 
                            label: 'Worst Case', 
                            conversion: '2.1%', 
                            revenue: '-12%', 
                            timeline: '12 weeks'
                        },
                        likely: { 
                            label: 'Most Likely', 
                            conversion: '5.4%', 
                            revenue: '+23%', 
                            timeline: '8 weeks'
                        }
                    },
                    competitive: {
                        best: { 
                            label: 'Best Case', 
                            marketShare: '+5%', 
                            retention: '94%', 
                            timeline: '4 weeks'
                        },
                        worst: { 
                            label: 'Worst Case', 
                            marketShare: '-8%', 
                            retention: '78%', 
                            timeline: '16 weeks'
                        },
                        likely: { 
                            label: 'Most Likely', 
                            marketShare: '+1%', 
                            retention: '86%', 
                            timeline: '10 weeks'
                        }
                    },
                    growth: {
                        best: { 
                            label: 'Best Case', 
                            mrr: '+78%', 
                            users: '+125%', 
                            timeline: '12 weeks'
                        },
                        worst: { 
                            label: 'Worst Case', 
                            mrr: '+12%', 
                            users: '+23%', 
                            timeline: '24 weeks'
                        },
                        likely: { 
                            label: 'Most Likely', 
                            mrr: '+34%', 
                            users: '+56%', 
                            timeline: '16 weeks'
                        }
                    }
                };
                return scenarioData[type] || scenarioData.conversion;
            };

            const generateRecommendations = (type) => {
                const recommendationData = {
                    conversion: [
                        "Implement progressive disclosure in signup flow to reduce cognitive load",
                        "A/B test pricing page layout with clearer value proposition",
                        "Add social proof elements at key conversion points"
                    ],
                    competitive: [
                        "Emphasize unique differentiators in marketing messaging", 
                        "Accelerate roadmap for features competitors lack",
                        "Launch customer retention campaign to reduce churn risk"
                    ],
                    growth: [
                        "Develop API-first strategy to capture developer market",
                        "Create enterprise onboarding track for large accounts",
                        "Invest in content marketing for organic acquisition"
                    ]
                };
                return recommendationData[type] || recommendationData.conversion;
            };

            const viewCohortResults = (cohort) => {
                setModalContent({
                    title: `Strategy Analysis: ${cohort.scenario}`,
                    cohort: cohort
                });
                setShowModal(true);
            };

            return (
                <div className="main-content">
                    <div className="cohorts-header">
                        <h1 className="cohorts-title">🎯 Strategy Cohorts</h1>
                        <p className="cohorts-subtitle">
                            AI-powered scenario analysis and strategic decision-making for complex business challenges
                        </p>
                    </div>

                    <div className="cohorts-layout">
                        <div>
                            <ScenarioBuilder
                                scenarioDescription={scenarioDescription}
                                setScenarioDescription={setScenarioDescription}
                                selectedScenarioType={selectedScenarioType}
                                setSelectedScenarioType={setSelectedScenarioType}
                                scenarioTypes={scenarioTypes}
                                scenarioVariables={scenarioVariables}
                                setScenarioVariables={setScenarioVariables}
                                scenarioTemplates={scenarioTemplates}
                                runCohort={runCohort}
                            />

                            <ActiveCohorts
                                activeCohorts={activeCohorts}
                                viewCohortResults={viewCohortResults}
                            />
                        </div>

                        <StrategyControlPanel activeCohorts={activeCohorts} />
                    </div>

                    <CohortResultsModal
                        show={showModal}
                        onClose={() => setShowModal(false)}
                        content={modalContent}
                    />
                </div>
            );
        }

        // Scenario Builder Component
        function ScenarioBuilder({ 
            scenarioDescription, 
            setScenarioDescription, 
            selectedScenarioType, 
            setSelectedScenarioType, 
            scenarioTypes, 
            scenarioVariables, 
            setScenarioVariables, 
            scenarioTemplates, 
            runCohort 
        }) {
            return (
                <div className="scenario-builder">
                    <div className="builder-header">
                        <span style={{fontSize: '24px'}}>🎯</span>
                        <h2 className="builder-title">Strategic Scenario Builder</h2>
                    </div>

                    <div className="scenario-tabs">
                        {scenarioTypes.map(type => (
                            <button
                                key={type.id}
                                className={`scenario-tab ${selectedScenarioType === type.id ? 'active' : ''}`}
                                onClick={() => setSelectedScenarioType(type.id)}
                            >
                                {type.emoji} {type.name}
                            </button>
                        ))}
                    </div>

                    <div className="scenario-input-section">
                        <label className="input-label">Describe your strategic scenario or challenge:</label>
                        <textarea
                            className="scenario-textarea"
                            placeholder="Describe the strategic scenario you want to analyze. Be specific about the challenge, opportunity, or decision you're facing..."
                            value={scenarioDescription}
                            onChange={(e) => setScenarioDescription(e.target.value)}
                        />
                    </div>

                    <div className="scenario-templates">
                        {scenarioTemplates.map((template, index) => (
                            <div
                                key={index}
                                className="template-chip"
                                onClick={() => setScenarioDescription(template)}
                            >
                                {template}
                            </div>
                        ))}
                    </div>

                    <div className="scenario-variables">
                        <div className="variable-input">
                            <label className="input-label">Timeframe</label>
                            <select
                                value={scenarioVariables.timeframe}
                                onChange={(e) => setScenarioVariables(prev => ({
                                    ...prev,
                                    timeframe: e.target.value
                                }))}
                            >
                                <option value="1month">1 Month</option>
                                <option value="3months">3 Months</option>
                                <option value="6months">6 Months</option>
                                <option value="1year">1 Year</option>
                            </select>
                        </div>
                        
                        <div className="variable-input">
                            <label className="input-label">Budget ($)</label>
                            <input
                                type="number"
                                value={scenarioVariables.budget}
                                onChange={(e) => setScenarioVariables(prev => ({
                                    ...prev,
                                    budget: e.target.value
                                }))}
                                placeholder="10000"
                            />
                        </div>
                        
                        <div className="variable-input">
                            <label className="input-label">Team Size</label>
                            <input
                                type="number"
                                value={scenarioVariables.teamSize}
                                onChange={(e) => setScenarioVariables(prev => ({
                                    ...prev,
                                    teamSize: e.target.value
                                }))}
                                placeholder="3"
                            />
                        </div>
                        
                        <div className="variable-input">
                            <label className="input-label">Risk Tolerance</label>
                            <select
                                value={scenarioVariables.riskTolerance}
                                onChange={(e) => setScenarioVariables(prev => ({
                                    ...prev,
                                    riskTolerance: e.target.value
                                }))}
                            >
                                <option value="low">Conservative</option>
                                <option value="medium">Moderate</option>
                                <option value="high">Aggressive</option>
                            </select>
                        </div>
                    </div>

                    <button
                        className="run-cohort-button"
                        disabled={!scenarioDescription.trim()}
                        onClick={() => runCohort(scenarioDescription)}
                    >
                        🎯 Run Strategic Analysis
                    </button>
                </div>
            );
        }

        // Active Cohorts Component
        function ActiveCohorts({ activeCohorts, viewCohortResults }) {
            if (activeCohorts.length === 0) {
                return (
                    <div className="active-cohorts">
                        <h2 style={{fontSize: '20px', fontWeight: 'bold', marginBottom: '16px', color: '#2d3748'}}>
                            Active Strategy Cohorts
                        </h2>
                        <div style={{textAlign: 'center', padding: '40px', color: '#718096'}}>
                            <div style={{fontSize: '48px', marginBottom: '16px'}}>🎯</div>
                            <p>No active strategy cohorts. Run your first scenario analysis to get started!</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="active-cohorts">
                    <h2 style={{fontSize: '20px', fontWeight: 'bold', marginBottom: '16px', color: '#2d3748'}}>
                        Active Strategy Cohorts ({activeCohorts.length})
                    </h2>
                    
                    <div className="cohorts-grid">
                        {activeCohorts.map(cohort => (
                            <CohortCard
                                key={cohort.id}
                                cohort={cohort}
                                onViewResults={() => viewCohortResults(cohort)}
                            />
                        ))}
                    </div>
                </div>
            );
        }

        // Cohort Card Component
        function CohortCard({ cohort, onViewResults }) {
            const getStatusClass = (status) => {
                switch(status) {
                    case 'running': return 'status-running';
                    case 'completed': return 'status-completed';
                    default: return 'status-running';
                }
            };

            const getCardClass = (status) => {
                switch(status) {
                    case 'running': return 'cohort-card running';
                    case 'completed': return 'cohort-card completed';
                    default: return 'cohort-card running';
                }
            };

            const formatTimeRemaining = () => {
                if (cohort.status === 'completed') return 'Analysis Complete';
                const remaining = Math.max(0, Math.round((100 - cohort.progress) / 100 * 8));
                return `~${remaining} min remaining`;
            };

            return (
                <div className={getCardClass(cohort.status)}>
                    <div className="cohort-header-card">
                        <div>
                            <div className="cohort-title-card">
                                Strategy Cohort #{cohort.id.toString().slice(-4)}
                            </div>
                            <div className="cohort-scenario">"{cohort.scenario}"</div>
                        </div>
                        <div className={`cohort-status ${getStatusClass(cohort.status)}`}>
                            {cohort.status}
                        </div>
                    </div>

                    {cohort.scenarios.best && (
                        <div className="scenarios-section">
                            <div style={{fontSize: '14px', fontWeight: '600', marginBottom: '8px', color: '#2d3748'}}>
                                📊 Scenario Outcomes
                            </div>
                            <div className="scenarios-grid">
                                <div className="scenario-outcome best">
                                    <div className="outcome-label">Best Case</div>
                                    <div className="outcome-value">
                                        {cohort.scenarios.best.conversion || cohort.scenarios.best.mrr || cohort.scenarios.best.marketShare}
                                    </div>
                                </div>
                                <div className="scenario-outcome likely">
                                    <div className="outcome-label">Most Likely</div>
                                    <div className="outcome-value">
                                        {cohort.scenarios.likely.conversion || cohort.scenarios.likely.mrr || cohort.scenarios.likely.marketShare}
                                    </div>
                                </div>
                                <div className="scenario-outcome worst">
                                    <div className="outcome-label">Worst Case</div>
                                    <div className="outcome-value">
                                        {cohort.scenarios.worst.conversion || cohort.scenarios.worst.mrr || cohort.scenarios.worst.marketShare}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="cohort-progress">
                        <div className="progress-bar-cohort">
                            <div 
                                className="progress-fill-cohort"
                                style={{width: `${cohort.progress}%`}}
                            ></div>
                        </div>
                        <div className="progress-text-cohort">
                            <span>{Math.round(cohort.progress)}% Complete</span>
                            <span>{formatTimeRemaining()}</span>
                        </div>
                    </div>

                    {cohort.recommendations.length > 0 && (
                        <div className="recommendations-preview">
                            <div className="recommendations-title">
                                💡 Strategic Recommendations ({cohort.recommendations.length})
                            </div>
                            <ul className="recommendations-list">
                                {cohort.recommendations.slice(0, 3).map((rec, index) => (
                                    <li key={index}>{rec}</li>
                                ))}
                            </ul>
                        </div>
                    )}

                    <div className="cohort-actions">
                        {cohort.status === 'completed' && (
                            <button className="action-btn-cohort" onClick={onViewResults}>
                                📊 View Full Analysis
                            </button>
                        )}
                        <button className="action-btn-cohort">
                            ⏸️ Pause
                        </button>
                        <button className="action-btn-cohort">
                            📋 Export Report
                        </button>
                    </div>
                </div>
            );
        }

        // Strategy Control Panel Component
        function StrategyControlPanel({ activeCohorts }) {
            const totalCohorts = activeCohorts.length;
            const runningCount = activeCohorts.filter(c => c.status === 'running').length;
            const completedCount = activeCohorts.filter(c => c.status === 'completed').length;
            const avgProgress = totalCohorts > 0 
                ? Math.round(activeCohorts.reduce((sum, c) => sum + c.progress, 0) / totalCohorts)
                : 0;

            const strategyTemplates = [
                {
                    title: "Pricing Strategy Optimization",
                    description: "Analyze impact of different pricing models and tiers"
                },
                {
                    title: "Competitive Response Plan",
                    description: "Strategic responses to major competitor moves"
                },
                {
                    title: "Feature Prioritization Matrix",
                    description: "ROI-based feature development scenarios"
                },
                {
                    title: "Market Entry Strategy",
                    description: "Risk analysis for new market segments"
                },
                {
                    title: "Crisis Management Protocol",
                    description: "Response strategies for negative events"
                }
            ];

            const recentStrategies = [
                {
                    text: "Reducing signup friction could improve conversion by 15-20%",
                    outcome: "Best Case: 8.2% conversion rate"
                },
                {
                    text: "Competitive pricing response needed within 4 weeks",
                    outcome: "Risk: -8% market share if delayed"
                },
                {
                    text: "Enterprise pivot shows 78% MRR growth potential",
                    outcome: "Timeline: 12-16 weeks implementation"
                }
            ];

            return (
                <div className="strategy-control-panel">
                    <div className="strategy-stats">
                        <h3 className="strategy-stats-title">📊 Cohort Statistics</h3>
                        <div className="strategy-stats-grid">
                            <div className="strategy-stat-item">
                                <div className="strategy-stat-value">{totalCohorts}</div>
                                <div className="strategy-stat-label">Total Cohorts</div>
                            </div>
                            <div className="strategy-stat-item">
                                <div className="strategy-stat-value">{runningCount}</div>
                                <div className="strategy-stat-label">Running Now</div>
                            </div>
                            <div className="strategy-stat-item">
                                <div className="strategy-stat-value">{completedCount}</div>
                                <div className="strategy-stat-label">Completed</div>
                            </div>
                            <div className="strategy-stat-item">
                                <div className="strategy-stat-value">{avgProgress}%</div>
                                <div className="strategy-stat-label">Avg Progress</div>
                            </div>
                        </div>
                    </div>

                    <div className="strategy-templates">
                        <h3 className="strategy-stats-title">🚀 Strategy Templates</h3>
                        {strategyTemplates.map((template, index) => (
                            <div key={index} className="strategy-template-item">
                                <div className="strategy-template-title">{template.title}</div>
                                <div className="strategy-template-description">{template.description}</div>
                            </div>
                        ))}
                    </div>

                    <div className="recent-strategies">
                        <h3 className="strategy-stats-title">💡 Recent Strategic Insights</h3>
                        {recentStrategies.map((strategy, index) => (
                            <div key={index} className="strategy-insight-item">
                                <div className="strategy-insight-text">{strategy.text}</div>
                                <div className="strategy-insight-outcome">— {strategy.outcome}</div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Cohort Results Modal Component
        function CohortResultsModal({ show, onClose, content }) {
            if (!content) return null;

            const { cohort } = content;

            const riskAnalysis = [
                {
                    level: 'High',
                    type: 'high',
                    description: 'Implementation complexity may delay timeline by 2-4 weeks'
                },
                {
                    level: 'Medium',
                    type: 'medium', 
                    description: 'User adoption curve steeper than projected'
                },
                {
                    level: 'Medium',
                    type: 'medium',
                    description: 'Competitor response could impact market share'
                },
                {
                    level: 'Low',
                    type: 'low',
                    description: 'Technical infrastructure can support growth'
                }
            ];

            const strategicRecommendations = [
                {
                    priority: 'Critical',
                    title: 'Implement Progressive Signup Flow',
                    details: 'Break down the signup process into smaller, less overwhelming steps. Focus on reducing cognitive load at the plan selection stage.',
                    timeline: '2-3 weeks',
                    effort: 'Medium',
                    impact: 'High'
                },
                {
                    priority: 'High',
                    title: 'Launch Retention Campaign',
                    details: 'Proactive outreach to at-risk customers based on usage patterns and engagement metrics to prevent churn.',
                    timeline: '1-2 weeks',
                    effort: 'Low',
                    impact: 'Medium'
                },
                {
                    priority: 'Medium',
                    title: 'Competitive Feature Analysis',
                    details: 'Conduct detailed analysis of Asana\'s new AI features to identify differentiation opportunities and potential counter-strategies.',
                    timeline: '3-4 weeks',
                    effort: 'High',
                    impact: 'High'
                }
            ];

            return (
                <div className={`modal-overlay ${show ? 'show' : ''}`} onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px'}}>
                            <h2 style={{fontSize: '24px', fontWeight: 'bold', color: '#2d3748'}}>
                                🎯 {content.title}
                            </h2>
                            <button 
                                onClick={onClose}
                                style={{background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer', color: '#a0aec0'}}
                            >
                                ×
                            </button>
                        </div>

                        <div className="scenario-analysis">
                            <div className="analysis-section">
                                <h3>📋 Executive Summary</h3>
                                <p style={{lineHeight: '1.6', color: '#4a5568', marginBottom: '16px'}}>
                                    Strategic cohort analysis completed for: "{cohort.scenario}". 
                                    Analysis considered {cohort.variables.timeframe} timeframe with ${parseInt(cohort.variables.budget).toLocaleString()} budget 
                                    and {cohort.variables.teamSize} team members under {cohort.variables.riskTolerance} risk tolerance.
                                </p>
                                <div style={{background: 'white', border: '1px solid #e2e8f0', borderRadius: '8px', padding: '12px'}}>
                                    <strong>Key Finding:</strong> Most likely scenario shows significant potential for improvement 
                                    with moderate resource investment and calculated risk management.
                                </div>
                            </div>

                            <div className="analysis-section">
                                <h3>📊 Scenario Outcomes Comparison</h3>
                                <div className="scenarios-comparison">
                                    <div className="scenario-card best-case">
                                        <div className="scenario-title">Best Case Scenario</div>
                                        <div className="scenario-metrics">
                                            {Object.entries(cohort.scenarios.best).map(([key, value]) => (
                                                key !== 'label' && (
                                                    <div key={key} className="metric-row">
                                                        <span className="metric-label">{key}:</span>
                                                        <span className="metric-value">{value}</span>
                                                    </div>
                                                )
                                            ))}
                                            <div className="metric-row">
                                                <span className="metric-label">Probability:</span>
                                                <span className="metric-value">15%</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="scenario-card likely-case">
                                        <div className="scenario-title">Most Likely Scenario</div>
                                        <div className="scenario-metrics">
                                            {Object.entries(cohort.scenarios.likely).map(([key, value]) => (
                                                key !== 'label' && (
                                                    <div key={key} className="metric-row">
                                                        <span className="metric-label">{key}:</span>
                                                        <span className="metric-value">{value}</span>
                                                    </div>
                                                )
                                            ))}
                                            <div className="metric-row">
                                                <span className="metric-label">Probability:</span>
                                                <span className="metric-value">65%</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="scenario-card worst-case">
                                        <div className="scenario-title">Worst Case Scenario</div>
                                        <div className="scenario-metrics">
                                            {Object.entries(cohort.scenarios.worst).map(([key, value]) => (
                                                key !== 'label' && (
                                                    <div key={key} className="metric-row">
                                                        <span className="metric-label">{key}:</span>
                                                        <span className="metric-value">{value}</span>
                                                    </div>
                                                )
                                            ))}
                                            <div className="metric-row">
                                                <span className="metric-label">Probability:</span>
                                                <span className="metric-value">20%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="analysis-section">
                                <h3>⚠️ Risk Assessment Matrix</h3>
                                <div className="risk-matrix">
                                    {riskAnalysis.map((risk, index) => (
                                        <div key={index} className="risk-item">
                                            <div className={`risk-level ${risk.type}`}>{risk.level} Risk</div>
                                            <div className="risk-description">{risk.description}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="analysis-section">
                                <h3>🎯 Strategic Recommendations</h3>
                                <div className="strategic-recommendations">
                                    {strategicRecommendations.map((rec, index) => (
                                        <div key={index} className="recommendation-item">
                                            <div className="recommendation-priority">{rec.priority}</div>
                                            <div className="recommendation-title">{rec.title}</div>
                                            <div className="recommendation-details">{rec.details}</div>
                                            <div className="recommendation-meta">
                                                <span><strong>Timeline:</strong> {rec.timeline}</span>
                                                <span><strong>Effort:</strong> {rec.effort}</span>
                                                <span><strong>Impact:</strong> {rec.impact}</span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="analysis-section">
                                <h3>📈 Success Metrics & KPIs</h3>
                                <div style={{background: 'white', border: '1px solid #e2e8f0', borderRadius: '8px', padding: '16px'}}>
                                    <div style={{display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '16px'}}>
                                        <div>
                                            <strong>Primary Metrics:</strong>
                                            <ul style={{marginTop: '8px', paddingLeft: '20px'}}>
                                                <li>Signup conversion rate</li>
                                                <li>Trial-to-paid conversion</li>
                                                <li>Monthly churn rate</li>
                                                <li>Average revenue per user</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <strong>Secondary Metrics:</strong>
                                            <ul style={{marginTop: '8px', paddingLeft: '20px'}}>
                                                <li>User engagement score</li>
                                                <li>Feature adoption rates</li>
                                                <li>Customer satisfaction (NPS)</li>
                                                <li>Competitive win/loss ratio</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style={{marginTop: '24px', display: 'flex', justifyContent: 'flex-end', gap: '12px'}}>
                            <button 
                                onClick={onClose}
                                style={{
                                    padding: '10px 20px',
                                    background: '#f7fafc',
                                    border: '1px solid #e2e8f0',
                                    borderRadius: '8px',
                                    cursor: 'pointer'
                                }}
                            >
                                Close
                            </button>
                            <button 
                                style={{
                                    padding: '10px 20px',
                                    background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                                    color: 'white',
                                    border: 'none',
                                    borderRadius: '8px',
                                    cursor: 'pointer'
                                }}
                            >
                                📋 Create Action Plan
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
